name: Wiki Page Notification

on:
  gollum

jobs:
  notify-teams:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Teams on Wiki Page Creation
        if: ${{ github.event.pages[0].action == 'created' }}
        run: |
          curl -X POST -H "Content-Type: application/json" \
            -d '{
                  "page": "${{ github.event.pages[0].page_name }}",
                  "author": "${{ github.actor }}",
                  "url": "${{ github.event.pages[0].html_url }}",
                  "repository": "${{ github.repository }}"
                }' \
            ${{ secrets.TEAMS_WIKI_WEBHOOK_URL }}
